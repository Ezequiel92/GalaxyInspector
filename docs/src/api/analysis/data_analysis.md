# Data analysis functions

These functions are used internally and none are exported. 

They may depend on the particulars of the simulation code (e.g. internal units).

These functions read the data generated by the [data acquisition](https://ezequiel92.github.io/GalaxyInspector/dev/api/analysis/data_acquisition/) functions, and produce the values that will be plotted.

### Signature for the [`plotSnapshot`](@ref) function

```julia
  da_function(data_dict, args...; kwargs...) -> (processed_data, ...)
```

where:

  - `data_dict::Dict`
  - `processed_data::Union{VecOrMat{<:Number},Nothing}`

A data analysis functions for the [pipeline](https://ezequiel92.github.io/GalaxyInspector/dev/api/plotting/pipelines/) [`plotSnapshot`](@ref) must take a dictionary with the following shape:

  + `:sim_data`          -> `::Simulation` (see [`Simulation`](https://ezequiel92.github.io/GalaxyInspector/dev/api/constants/globals/#GalaxyInspector.Simulation)).
  + `:snap_data`         -> `::Snapshot` (see [`Snapshot`](https://ezequiel92.github.io/GalaxyInspector/dev/api/constants/globals/#GalaxyInspector.Snapshot)).
  + `:gc_data`           -> `::GroupCatalog` (see [`GroupCatalog`](https://ezequiel92.github.io/GalaxyInspector/dev/api/constants/globals/#GalaxyInspector.GroupCatalog)).
  + `cell/particle type` -> (`block name` -> data for `block name`, `block name` -> data of `block name`, ...).
  + `cell/particle type` -> (`block name` -> data for `block name`, `block name` -> data of `block name`, ...).
  + `cell/particle type` -> (`block name` -> data for `block name`, `block name` -> data of `block name`, ...).
    + ...
  + `groupcat type`      -> (`block name` -> data for `block name`, `block name` -> data of `block name`, ...).
  + `groupcat type`      -> (`block name` -> data for `block name`, `block name` -> data of `block name`, ...).
  + `groupcat type`      -> (`block name` -> data for `block name`, `block name` -> data of `block name`, ...).
  + ...

and return one or more vectors or matrices with the processed data (see [`plotSnapshot`](@ref) for specifics). It should return `nothing` if the input data has some problem that prevents computation (e.g. it is empty).

### Signature for the [`plotTimeSeries`](@ref) function

```julia
  da_function(sim_data, args...; kw_args...) -> (processed_data_x, processed_data_y)
```

where:

  - `sim_data::Simulation`, see [`Simulation`](https://ezequiel92.github.io/GalaxyInspector/dev/api/constants/globals/#GalaxyInspector.Simulation)
  - `processed_data_x::Vector{<:Number}`
  - `processed_data_y::Vector{<:Number}`

A data analysis functions for the [pipeline](https://ezequiel92.github.io/GalaxyInspector/dev/api/plotting/pipelines/) [`plotTimeSeries`](@ref) must take a [`Simulation`](https://ezequiel92.github.io/GalaxyInspector/dev/api/constants/globals/#GalaxyInspector.Simulation) struct, and return two vectors. It should return `nothing` if the input data has some problem that prevents computation (e.g. is empty).

---

```@autodocs
Modules = [GalaxyInspector]
Pages   = ["analysis/data_analysis.jl"]
```
